data = readSalesFigures();x = data.Days(4:end-1)';y = data.Bread(4:end-1);maxTemp = data.MaxTemp(4:end-1);hold on;slopes = [];averages = [];averageX = [];averageTemp = [];intercepts = [];for i = [1:7:numel(x)]    xPeriod = x(i:i+6);  yPeriod = y(i:i+6);    zeroEntries = find(yPeriod <= 0);  xPeriod(zeroEntries) = [];  yPeriod(zeroEntries) = [];    [slope, intercept] = slopeAndIntercept(xPeriod, yPeriod);  slopes = [slopes slope];  intercepts = [intercepts intercept];  averages = [averages mean(yPeriod)];  averageX = [averageX mean(xPeriod)];  averageTemp = [averageTemp mean(maxTemp(i:i+6))];  hold on;endoutlierInds = findOutliers(slopes);xSlopes = [1:length(slopes)];xSlopes(outlierInds) = [];ySlopes = slopes;ySlopes(outlierInds) = [];m = mean(ySlopes);newIs = averages - averageX .* m;tempIndexes = find(maxTemp >= 10);deltaYs = [];periodIndex = 0;for i = [1:7:numel(x)]  periodIndex = periodIndex + 1;    if any(outlierInds == periodIndex)    deltaYs(i:i+6) = 0;    continue;  end  xPeriod = x(i:i+6);  yPeriod = y(i:i+6);    deltaYs(i:i+6) = yPeriod - (m .* xPeriod + newIs(periodIndex)) + averages(periodIndex);endinds = intersect(tempIndexes, find(deltaYs > 100));corrcoef(deltaYs(inds), maxTemp(inds))plot(x, y, "b*", x, deltaYs, "r");xlim([0 80]);ylim([700 1200]);figure(2);plot(deltaYs(inds), maxTemp(inds), "b*");hold on;